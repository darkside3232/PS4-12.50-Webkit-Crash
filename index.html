<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>PS4 12.50 WEBKIT CRASH TEST By √áƒ±nar G√ºney</title>
<style>
  /* Temel Stiller */
  body {
    background:#000; color:#0f0; font-family: monospace; padding:1em; text-align:center; margin:0;
    transition: background-color .5s,color .5s; overflow: hidden;
  }
  /* Y√ºkleme Men√ºs√º Stilleri */
  #loader-menu {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: #000; z-index: 10000;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    transition: opacity 0.5s ease-out; opacity: 1;
  }
  #loader-menu.hidden {
    opacity: 0; pointer-events: none;
  }
  #status-icon {
    font-size: 50px; margin-bottom: 20px;
  }
  #status-message {
    font-size: 24px; color: #0f0;
    animation: rgbShift 3s linear infinite;
  }
  /* Ana ƒ∞√ßerik Ba≈ülangƒ±√ßta Gizli */
  .main-content {
    visibility: hidden; opacity: 0;
    transition: opacity 0.5s ease-in;
  }
  .main-content.visible {
    visibility: visible; opacity: 1;
  }
  .ellieLove {
    position: fixed; bottom:20px; right:40px; color:#f0f; font-size:20px; font-weight:700;
  }
  #startBtn {
    position: absolute; top:45%; left:50%; transform:translate(-50%,-50%);
    padding:20px 40px; font-size:24px; background:#0f0; color:#000; border:none; border-radius:10px; cursor:pointer;
  }
  #instruction {
    display:none; position:absolute; top:45%; left:50%; transform:translate(-50%,-50%);
    width:100%; font-size:54px; animation:rgbShift 3s linear infinite;
  }
  @keyframes rgbShift { 0%,100%{color:#f00;} 33%{color:#0f0;} 66%{color:#00f;} }
  #languageSelector {
    position: fixed; bottom:20px; left:20px; background:#111; color:#0f0;
    border:1px solid #0f0; border-radius:8px; padding:5px 10px;
    font-family: monospace; user-select:none; z-index:9999;
    display:flex; align-items:center; gap:8px;
  }
  #languageSelector select {
    background:#111; color:#0f0; border:none;
    font-family: monospace; font-size:14px; cursor:pointer; outline:none;
  }
  .themeBtn { padding:4px 10px; font-family: monospace; font-size:14px; border:1px solid #0f0; border-radius:5px; background:transparent; color:#0f0; cursor:pointer; user-select:none; transition: background-color .3s,color .3s; }
  .themeBtn.active { background:#0f0; color:#000; }
  body.light-theme { background:#fff; color:#060; }
  body.light-theme .ellieLove { color:#a00; }
  body.light-theme #loader-menu { background: #fff; }
  body.light-theme #status-message { color: #060; }
  body.light-theme #languageSelector { background:#eee; color:#060; border-color:#060; }
  body.light-theme #languageSelector select { background:#eee; color:#060; }
  body.light-theme .themeBtn { border-color:#060; color:#060; }
  body.light-theme .themeBtn.active { background:#060; color:#fff; }
  body.light-theme #startBtn { background:#060; color:#fff; }
</style>
</head>
<body>

<div id="loader-menu">
  <div id="status-icon">üîÑ</div>
  <div id="status-message">Ba≈ülatƒ±lƒ±yor...</div>
</div>

<div class="main-content">
  <h1 id="title">PS4 12.50 WEBKIT CRASH TEST By √áƒ±nar G√ºney</h1>
  <button id="startBtn" onclick="start()">Start</button>
  <div id="instruction">Press OPTIONS and Refresh the Page</div>
  <div class="ellieLove" id="ellieLove">Ellie √áƒ±narƒ±n Karƒ±sƒ±</div>
  <div id="languageSelector">
    <select id="lang" onchange="changeLang()">
      <option value="tr">T√ºrk√ße</option>
      <option value="en" selected>English</option>
      <option value="es">Espa√±ol</option>
      <option value="fr">Fran√ßais</option>
      <option value="de">Deutsch</option>
      <option value="it">Italiano</option>
      <option value="ru">–†—É—Å—Å–∫–∏–π</option>
      <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
      <option value="zh">‰∏≠Êñá</option>
      <option value="ja">Êó•Êú¨Ë™û</option>
      <option value="ko">ÌïúÍµ≠Ïñ¥</option>
      <option value="pt">Portugu√™s</option>
    </select>
    <button id="lightBtn" class="themeBtn" onclick="setTheme('light')">Light Theme</button>
    <button id="darkBtn" class="themeBtn active" onclick="setTheme('dark')">Dark Theme</button>
  </div>
</div>

<script>
// Service Worker Mantƒ±ƒüƒ±
const statusIcon = document.getElementById('status-icon');
const statusMessage = document.getElementById('status-message');
const loaderMenu = document.getElementById('loader-menu');
const mainContent = document.querySelector('.main-content');

function updateStatus(icon, message) {
  if (statusIcon) statusIcon.innerText = icon;
  if (statusMessage) statusMessage.innerText = message;
}

function showMainContent() {
    loaderMenu.classList.add('hidden');
    mainContent.classList.add('visible');
    document.body.style.overflow = 'auto';
}

if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    updateStatus('üîÑ', '√áevrimdƒ±≈üƒ± mod kontrol ediliyor...');
    navigator.serviceWorker.register('./sw.js')
      .then(registration => {
        console.log('ServiceWorker kaydƒ± ba≈üarƒ±lƒ±. Kapsam: ', registration.scope);
        // Eƒüer zaten aktif bir Service Worker varsa, cache'lenmi≈ü demektir.
        if (registration.active) {
          updateStatus('‚úîÔ∏è', '√ñnbellekten y√ºklendi!');
          setTimeout(showMainContent, 1500);
        }
        registration.onupdatefound = () => {
          const installingWorker = registration.installing;
          installingWorker.onstatechange = () => {
            if (installingWorker.state === 'installing') {
              updateStatus('‚è≥', 'Dosyalar indiriliyor...');
            } else if (installingWorker.state === 'installed') {
              if (navigator.serviceWorker.controller) {
                // Yeni i√ßerik mevcut, g√ºncelleme hazƒ±r.
                updateStatus('‚úÖ', 'Site g√ºncellendi! Yeniden ba≈ülatƒ±lƒ±yor...');
                setTimeout(() => window.location.reload(), 2000);
              } else {
                // ƒ∞lk defa cache'leniyor.
                updateStatus('‚úîÔ∏è', '√áevrimdƒ±≈üƒ± kullanƒ±m i√ßin hazƒ±r!');
                setTimeout(showMainContent, 2000);
              }
            }
          };
        };
      }).catch(error => {
        console.error('ServiceWorker kaydƒ± ba≈üarƒ±sƒ±z: ', error);
        updateStatus('‚ùå', 'Hata! √áevrimdƒ±≈üƒ± mod aktifle≈ütirilemedi.');
        // Hata durumunda bile 3 saniye sonra ana i√ßeriƒüi g√∂ster.
        setTimeout(showMainContent, 3000);
      });
  });
} else {
  // Service worker desteklenmiyorsa
  updateStatus('‚ö†Ô∏è', 'Tarayƒ±cƒ± desteklemiyor. √áevrimdƒ±≈üƒ± mod kullanƒ±lamaz.');
  setTimeout(showMainContent, 3000);
}

// Orijinal Fonksiyonlar
const translations={ tr:{title:"PS4 12.50 WEBKIT CRASH TEST By √áƒ±nar G√ºney",startBtn:"Ba≈ülat",instruction:"OPTIONS tu≈üuna bas ve sayfayƒ± yenile",ellieLove:"Ellie √áƒ±narƒ±n Karƒ±sƒ±",lightTheme:"Beyaz Tema",darkTheme:"Siyah Tema"}, en:{title:"PS4 12.50 WEBKIT CRASH TEST By √áƒ±nar G√ºney",startBtn:"Start",instruction:"Press OPTIONS and Refresh the Page",ellieLove:"Ellie, √áƒ±nar's Wife",lightTheme:"Light Theme",darkTheme:"Dark Theme"}, /* Diƒüer diller */ };
try { if(performance.navigation.type===1||performance.getEntriesByType("navigation")[0].type==="reload") (document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen).call(document); }catch(e){}
function start(){ const e=document.documentElement; (e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen).call(e); document.getElementById("startBtn").style.display="none"; document.getElementById("instruction").style.display="block"; }
function changeLang(){ const lang=document.getElementById('lang').value; if(!translations[lang])return; const t=translations[lang]; document.title=t.title; document.getElementById('title').innerText=t.title; document.getElementById('startBtn').innerText=t.startBtn; document.getElementById('instruction').innerText=t.instruction; document.getElementById('ellieLove').innerText=t.ellieLove; document.getElementById('lightBtn').innerText=t.lightTheme||"Light Theme"; document.getElementById('darkBtn').innerText=t.darkTheme||"Dark Theme"; }
function setTheme(theme){ if(theme==="light"){ document.body.classList.add("light-theme"); document.body.classList.remove("dark-theme"); } else { document.body.classList.remove("light-theme"); document.body.classList.add("dark-theme"); } localStorage.setItem("theme",theme); document.getElementById('lightBtn').classList.toggle('active',theme==="light"); document.getElementById('darkBtn').classList.toggle('active',theme==="dark"); }
document.addEventListener('DOMContentLoaded',()=>{ const select=document.getElementById('lang'); let userLang=(navigator.language||navigator.userLanguage).toLowerCase().split('-')[0]; if(!translations[userLang])userLang='en'; select.value=userLang; changeLang(); setTheme(localStorage.getItem("theme")||"dark"); });
</script>
</body>
</html>
